<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
  #landing {
    top: 0vh;
    transition: top 0.5s;
  }
  </style>
</head>



<body style="margin: 0px; overflow-y: hidden">
<%# L A N D I N G   P A G E %>
  <div id="landing" style="width: 100%; height: 100vh; position: absolute; z-index: 2">
    <div id="landing-bg" style="min-width: 100%; min-height: 100%; position: absolute; background-color: whitesmoke"></div>
    <div id= "landing-grid" style="position: relative">
      <div style="justify-self: center; align-self: center; min-width: 60%">
        <div id="container" style=""></div>
      </div>
      <div id = "welcome-to-my-pf" style=" " class="font-serif"><p style="text-align: center; margin: auto; font-weight: 400">welcome to<br>my portfolio</p></div>
    </div>
    <%#  <div id="triangle-down"></div> %>
  </div>
<%# / / / L A N D I N G   P A G E %>




  <div style="position: relative; z-index: 1">
   <br>
   <%# <a href="/"><header class="negre font-mono" style="font-weight: 600; width: 75%; margin: auto">gabriel ardÃ¨vol â€” web development</header></a> %>

    <div id= "header-grid">

      <div id="leftside"></div>

      <%# M I D D L E   G R I D %>
      <div style="position: relative">

        <%# <div style="display: flex; justify-content: space-between; margin-top: 1em"> %>
          <h2 class="negre text-blanc font-mono home-title">Gabriel ArdÃ¨vol </h2>

          <%# <%=image_tag("newtab.png", width: "100%", alt: "open in a new tab", height: 15, width: 15) %>
        <%# </div> %>

        <div class= "font-sans"style="display: flex; font-size: 0.9em">

          <div>
            <div style="display: flex; font-size: 0.9em; width: fit-content; margin: auto; " class="font-mono"><a href=""class="verd">Short bio</a> | <a href="" class="blau">Long bio</a> | <a href=""class="vermell">Some music?</a></div>
            <br>
            <div style="background-color: white" class= "lateral-margin">Welcome to my website and porfolio, I am a front-end web developer with full-stack capabilities. . If youâ€™re here itâ€™s probably because Iâ€™m looking for a job.
            Both in my career and personal life, I seek for ways to be playful while remaining profesional, creative and efective.
            As a designer i believe functionality is more important than aesthetics, but also that a unique visuality has it's own functionality in making something unique.
            If you are looking for that extra human value that IAâ€™s canâ€™t give, I might be your person.                 <%# <iframe style="border-radius:12px; max-width: 30%" src="https://open.spotify.com/embed/playlist/5dXE4JcY0emBX7hMqtFpQp?utm_source=generator" width="100%" height="352" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe> %>
            Please check <a href="" class="text-verd">my projects</a>! And here is<a href="" class= "text-verd"> my CV</a>. </div>
          </div>
                    <%# <img id="picture-ofmyface" style="background-color: grey; min-width: 10em; min-height: 10em; max-width: 10em; max-height: 10em; margin-right: 3em; border-radius: 50em;"> %>
        </div>

        <br><br><br>
        <%# <h2><mark style="margin-top: 1em" class="verd font-serif">ðŸŽ¯Skills / knowledge</mark></h2> %>
          <h2 class="negre text-blanc font-mono home-title">ðŸŽ¯Skills & knowledge</h2>
        <br>
        <div id="skill-grid" style="background-color: transparent; display: grid; align-items: center; place-items: center; border-radius: 8px; padding: 10px">
           <% array = [
            "logos/ruby.svg",
            "logos/rails.svg",
            "logos/css.svg",
            "logos/html.svg",
            "logos/javascript.svg",
             "logos/adobe.png",
            "logos/github.svg",
            "logos/blender.png",
            "logos/sql.png",
            "logos/figma.svg",
            "logos/heroku.png",

            ] %>
            <% array.each do |image_route|%>
            <div style = "width: 110px"><%=image_tag(image_route, width: "100%") %></div>
            <%end%>
        </div>



        <%# <br>
        <div class= "font-mono"style="display: flex; font-size: 0.9em">Currently learning:</div>
        <div style="background-color: white; border-radius: 10px; width: fit-content; margin-top: 3vh; padding: 10px">
          <div id="skills2-large" style="max-width: 100%; display: flex; gap: 20px">
            <% array = [
            "logos/react.png",

          </div>
        </div> %>


        <br><br><br>


        <h2 class="negre text-blanc font-mono home-title">ðŸª´Check my projects</h2>
        <br> <br>
        <div id="projects-grid">
          <% @projects.reverse.each do |project|%>

          <div class="project-card font-sans" style="font-size: 0.9em">
            <%= link_to project_path(project), style: "text-decoration: none; color: black" do %>

            <div style="position: relative;">
            <% images = string_to_array(project.images, ",") %>
            <%= image_tag(images[0], style: "opacity: 0.95") %>

            <div class="hashtags">

                <% hashtags = string_to_array(project.hashtags, ",") %>
                <% hashtags.each do |hashtag| %>
                <div class="hashtag"><%= hashtag %></div>

              <% end %>
          </div>
          </div>

            <div style =  "padding: 1em;
              margin-top: -0.3em;
              background-color: white;
              //width: 100%;
              border-bottom-left-radius: 0.6em;
              border-bottom-right-radius: 0.6em;">
              <b class ="font-mono"><%= project.title %></b>
              <br>
              <div class="text-overflow">
              <%= project.description %>
              </div>
            </div>
            <%end%>
          </div>
          <% end %>
        </div>
      </div>


      <br><br>
      <%# / / / M I D D L E   G R I D %>
      <%# <div style="position: sticky">
        <div
        style = "
        position: absolute;
        top: 10vh;
        right: 5vw;
        width: 80vw;
        height: 80vh;


        background: rgba( 255, 255, 255, 0.5 );
        box-shadow: 0 8px 32px 0 rgba( 31, 38, 135, 0.37 );
        backdrop-filter: blur( 13.5px );
        -webkit-backdrop-filter: blur( 4.5px );
        border-radius: 10px;
        border: 1px solid rgba( 255, 255, 255, 0.18 );
        ">
        hola</div>
      </div> %>
      <div id="rightside">
        <%# <b style="background-color: green; color: white; border-radius: 50px; font-size: 0.9em" class="font-serif"> Open to work </b> %>
      </div>

    </div>

  </div>

</body>


<script>
  function createRows() {                                                       //sets the rows where elements will be placed
    for (var i = 0; i < (string.length / columns); i++) {                       //iterator
    row = container.appendChild(document.createElement("div"))                  //adds html row to html container
    row.id = `row${i + 1}`;                                                     // gives ID to row
    row.className = "row"}                                                      //assigns css class to row
  }

  function createElements(){                                                    //creates the elements for a given string and places the elements in the rows
  for (var i = 0; i < string.length; i++) {                                      //iterator
    row = document.querySelector(`#row${(Math.ceil(((i) / columns)+0.1))}`)     // determines which row belongs to the iterated element
    div = row.appendChild(document.createElement("div"));                        // creates the element div
    div.id = `element${i+1}`                                                    // gives ID to element (it's index plus one)
    div.className = "characterContainer font-mono"
    div.style.fontWeight = "500"                                        //assigns css class to element
    div.textContent = `${string[i]}`                                            // fills the element with text
    function dataSetRows(i){                                                    // dataset guides interaction between elements
      elements = document.querySelectorAll(".characterContainer");              //this variable is still not full scope
      if (elements[i].textContent != " ") {                                     // spaces between words don't get dataset
        elements[i].setAttribute("data-row", `${(Math.ceil(((i) / columns)+0.1))//parent row
        }`);
        elements[i].setAttribute("data-active", "true");                        // indicates that the element is visible
        elements[i].setAttribute("data-merged", "false")}                       // indicates that the element contains one character
    }
    dataSetRows(i)
    randomColorize(i)
  }}

  function randomColorize(i) {
    const colors = ['#FF7373', '#739AFF', '#5BB8D6', '#FF9473'];
    const randomIndex = Math.floor(Math.random() * colors.length);
    const randomColor = colors[randomIndex];
    if(elements[i].dataset.active) {                                            //blank spaces of string appear transparent
    elements[i].style.backgroundColor = randomColor;}
  }

  function action() {
    //randomColorize(0)                                                         //will change color of first element
    for (var i = 0; i < (string.length - 1); i++) {
      if (elements[i].dataset.active == "true" && elements[i].dataset.merged == "false" && elements[i+1].dataset.merged == "false") {
        if(Math.random()<0.09){merge(i)};
      } else if (elements[i].dataset.active == "true" && elements[i].dataset.merged == "true") {
        if(Math.random()<0.18){split(i)};
      }
    }
  }

  function merge(i) {
    if(elements[i].dataset.row === elements[i+1].dataset.row){
    elements[i].dataset.merged = "true";
    increaseWidth(i)
    hyde(i)
    elements[i].textContent += `${elements[i+1].textContent}`
    }
  }

  function hyde(i) {
    if (elements[i+1].textContent != " ") {elements[i+1].dataset.active = "false";} //sets "active" (not to blank spaces) TODO: apply hyde() function
    deleteWidth(i+1)
  }

  function split(i) {
    elements[i].textContent = `${elements[i].textContent[0]}`
    decreaseWidth(i)
    elements[i].dataset.merged = "false";
    elements[i+1].style.display = "flex"
    elements[i+1].dataset.active = "true"
    randomColorize(i+1)
    restoreWidth(i+1)
  }

  function increaseWidth(i) {
    elements[i].style.width = "1.8em";
  }

  function decreaseWidth(i) {
    elements[i].style.width = "1.2em";
  }

  function deleteWidth(i) {
    elements[i].style.width = "0em";
    elements[i].style.height = "0em";
    elements[i].style.color = "transparent";
  }

  function restoreWidth(i) {
    elements[i].style.width = "1.2em";
    elements[i].style.height = "1.2em";
    elements[i].style.color = "black";
    randomColorize(i+1)

  }

  var string = "gabriel ardÃ¨vol"// MODIFY THE DISPLAYED TEXT HERE
  var columns = 4

  var container = document.querySelector("#container");
  createRows();
  createElements();
  elements = document.querySelectorAll(".characterContainer"); // turn to a separate function

  setInterval(action, 2700);


  //TODO
  //al clicar al landing:
  //        el landing s'enretira cap a dalt i llavors display: none;
  //        el vertical overflow passa de hidden a scroll
  landingScreen = document.querySelector("#landing")
  function hydeLanding() {
    landingScreen.style.top = "-100vh";
    document.querySelector("body").style.overflowY = "scroll"
  }
  landingScreen.addEventListener("click", hydeLanding)
    landingScreen.addEventListener("keypress", hydeLanding)


  </script>
</body>
</html>
